<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>TKB數位學堂-贏家經驗談</title>
<meta name="description" content="大學學測個人申請,研究推甄甄試,研究所在職專班,高職升科大書審口試輔導專家"/>
<meta name="keywords" content="推甄,大學甄選,甄試入學,申請入學,面試技巧,科大申請,備審資料,推薦入學"/>
<link rel="shortcut icon" type="image/x-icon" th:href="${@environment.getProperty('static.url')}+@{/images/favicon_tkb.ico}" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<link rel="stylesheet" type="text/css" th:href="${@environment.getProperty('static.url')}+@{/css/front/front_style.css}" />	<!-- 電腦版 -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
<!-- 20190625 start -->
<link rel="stylesheet" type="text/css" th:href="${@environment.getProperty('static.url')}+@{/css/front/font-awesome.css}" />
<link type="text/css" rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous" />
<link type="text/css" rel="stylesheet" th:href="${@environment.getProperty('static.url')}+@{/css/front/jquery.mCustomScrollbar.css}" />
<!-- 20190625 end -->
<link th:insert="~{front/loadForOldPage/js :: common}">
</head>
<body>

<form method="POST" id="searchWinnerForm" name="searchWinnerForm">
	<input type="hidden" id="id" name="winner.id" />
	<input type="hidden" id="winner_year" name="winner_year" value=""/>
	<input type="hidden" id="winner_category" name="winner_category" value=""/>
	<input type="hidden" id="parent_category" name="winner.parent_category" />
</form>
<form id="getForm" method="GET" enctype="multipart/form-data">
	<input type="hidden" id="str" name="str"/>
</form>
<div class="goTop"></div>
<div th:insert="~{front/loadForOldPage/layout :: menu_rwd}"></div>
<div class="wrapper">
<div class="header-box">  
		<div th:insert="~{front/loadForOldPage/layout :: header}"></div>
		
		<div th:insert="~{front/loadForOldPage/layout :: menu}"></div>
	</div>
	<div class="content">
		<h1>影音專區</h1>
		<div class="back"><a th:href="@{/index}">回上頁</a></div>
		<hr>
        <div class="quick-tag">
		<ul>年度
        	<li class="winnerYear sort_click"><a class="year" data-year="ALL">全部</a></li>
			<th:block th:each="dataStatus , data : ${winnerYearList}">
				<li class="winnerYear"><a class="year" th:attr="data-year=${dataStatus.year}">[[${dataStatus.year}]]年</a></li>
			</th:block>
        </ul>

		<ul>分類
			<li class="videoCategory sort_click"><a class="videoCategory" data-category="ALL">全部</a></li>
			<th:block th:each="dataStatus , data : ${winnerCategoryList}">
				<th:block th:if="${dataStatus.use_count} != 0">
				<li>
					<a class="videoCategory" th:attr="data-category=${dataStatus.id}">[[${dataStatus.name}]]</a>
				</li>
				</th:block>
			</th:block>
		</ul>
	</div>
	<section class="hot-video">
            <div class="hot-title">
                <span>熱門</span>影音
            </div>
            <div class="hot-area">
            <section class="hot-content">
			<th:block th:each="dataStatus , data : ${winnerVideoIndexList} " >
				<th:block th:if="${data.count}==1">
                <div class="left">
                    <div class="hot-info">
                    <div class="spec-title"><a th:href="@{'/winner/inside?str=' +${dataStatus.encrypturl}}">
                    [[${dataStatus.year}]]年考取[[${dataStatus.admitted}]]
                    <span>榜首</span>
                     <th:block th:if="${dataStatus.name.length()}== 2">
						[[${dataStatus.name[0]}]]○
					</th:block >
					<th:block th:if="${dataStatus.name.length()}== 3">
						[[${dataStatus.name[0]}]]○[[${dataStatus.name[2]}]]
					</th:block >
					<th:block th:if="${dataStatus.name.length()}== 4">
						[[${dataStatus.name[0]}]]○○[[${dataStatus.name[3]}]]
					 </th:block >
                    </div>
                    <aside>
                    <a class="spec-txt" th:href="@{'/winner/inside?str=' + ${dataStatus.encrypturl}}">
                        [[${dataStatus.summary}]]
                    </a>
                    </aside>
                    </div>
                </div>

                <div class="right">
                <div class="divine-2-box">
                    <div class="divine-left">
					<a th:href="@{'/winner/inside?str=' + ${dataStatus.encrypturl}}">
				        <div class="btn-play"><img th:src="${@environment.getProperty('static.url')}+@{/images/front/btn_video_play.png}"></div>
				        <div class="photo">
				        <div class="info">
				         <th:block th:if="${dataStatus.name.length()}== 2">
				          <div class="photo-name">[[${dataStatus.name[0]}]]○</div>
						 </th:block >
						 <th:block th:if="${dataStatus.name.length()}== 3">
						 	<div class="photo-name">[[${dataStatus.name[0]}]]○[[${dataStatus.name[2]}]]</div>
						 </th:block >
						 <th:block th:if="${dataStatus.name.length()}== 4">
						 	<div class="photo-name">[[${dataStatus.name[0]}]]○○[[${dataStatus.name[3]}]]</div>
						  </th:block >
				       	 	<div class="photo-title">[[${dataStatus.year}]]年考取[[${dataStatus.admitted}]]</div>
				        </div>
						<img th:src="${dataStatus.photo}">
						</div>
				    </a>
					</div>
					</th:block>
					</th:block>
                    <div class="divine-right">
					<th:block th:each="dataStatus , data : ${winnerVideoIndexList} " >
						<th:block th:if="${data.count!=1}">
						<div class="photo-s" >
				        <a th:href="@{'/winner/inside?str=' + ${dataStatus.encrypturl}}">
	                    <div class="info">
	                    <div class="photo-title-s">[[${dataStatus.year}]]年考取[[${dataStatus.admitted}]]<span>榜首</span></div>
	                    </div>
	                    <div class="btn-play"><img th:src="${@environment.getProperty('static.url')}+@{/images/front/btn_video_play.png}"></div>
	                    <img th:src="${dataStatus.photo}" width="272" height="111" />
	                    </a>
	                    </div>

						</th:block>
	           		 </th:block>
           		 </div>
               
            </section><!-- hot-content -->
            </div>
        </section><!-- hot-video -->
		<section class="video-category">
			<th:block th:each="dataStatus , data : ${winnerVideoListII}">
			<div class="video-title">[[${dataStatus.categoryName}]]</div>
            <div class="video-group">
                <div class="video-box" th:each=" list :${dataStatus.videoList}">
                <div class="photo"><a th:href="@{'/winner/inside?str=' + ${list.encrypturl}}"><img th:src="${@environment.getProperty('static.url')}+@{/images/front/btn_video_play.png}" style="position:absolute;z-index:2;top: 30%;left: 40%;width: 20%;" /><img th:src="${list.photo}" style="position:absolute;z-index:1;" /></a></div>
                <div class="photo-title">
                <a th:href="@{'/winner/inside?str=' + ${list.encrypturl}}">[[${list.year}]]年考取[[${list.admitted}]]</a>
                </div>
                <aside>
                <a class="video-inside-txt" th:href="@{'/winner/inside?str=' + ${list.encrypturl}}">[[${list.summary}]]</a>
                </aside>
                </div>
            </div>
            </th:block>
        </section><!-- video-category -->
		
	</div><!-- content -->
	<div th:insert="~{front/loadForOldPage/layout :: footer}"></div>	
	<script th:src="${@environment.getProperty('static.url')}+@{/js/front/text-overflow.js}"></script>
	<script th:src="${@environment.getProperty('static.url')}+@{/js/front/advertising.js}"></script>	
	
</div><!-- wrapper -->
<script>
$(function(){
	function search(){
	$.ajax({
		url:"[[${@environment.getProperty('weburl')}]]/winner/search",
		cache: false,
		async: false,
		dataType: "json",
		type:"GET",
		data:{
			year : $("#winner_year").val(),
			category : $("#winner_category").val()
		},
		error: function(xhr) {
			alert('Ajax request 發生錯誤');
		},
		success: function(data){
		var str = "";
		
		$(".video-category").empty();
		if(data != null && data.length > 0){
			for(i=0 ; i<data.length ; i++){
				var video = data[i];
				str += `<div class="video-title">${video.categoryName}</div>`;
				str += `<div class="video-group">`;
				var videoList = video.videoList;
				for(j=0 ; j<videoList.length ; j++){
				str += `<div class="video-box">`;
				str += `<div class="photo"><a href="/winner/inside?str=${videoList[j].encrypturl}"><img src='/images/front/btn_video_play.png' style='position:absolute;z-index:2;top: 30%;left: 40%;width: 20%;'/><img src=${videoList[j].photo} style='position:absolute;z-index:1;'/></a></div>`;
				str += `<div class="photo-title"><a href="/winner/inside?str=${videoList[j].encrypturl}">${videoList[j].year}年考取${videoList[j].admitted}</a></div>`;
				str += `<aside>`;										
				str += `<a class="video-inside-txt" style=" display: -webkit-box;-webkit-box-orient: vertical;-webkit-line-clamp: 3;overflow: hidden;" href="/winner/inside?str=${videoList[j].encrypturl}">${videoList[j].summary}</a>`;
				str += `</aside>`;
				str += `</div>`;
				}
				str += `</div>`;
			}
			$(".video-category").append(str);
		}
		}
	});
}
	
	$(".year").on("click",function(){
	const year = $(this).attr("data-year");
	if(year == "ALL"){
		$("#winner_year").val('');
	}else{
		$("#winner_year").val(year);
	}
	search();
	})
	
	$(".videoCategory").on("click",function(){
	const category = $(this).attr("data-category");
	if(category == "ALL"){
		$("#winner_category").val('');
	}else{
		$("#winner_category").val(category);
	}
	search();
	})
})
$("body").on("click", ".winnerYear",function(){
	$(".winnerYear").removeClass("sort_click");
	$(this).addClass("sort_click");
})
$("body").on("click", ".videoCategory",function(){
	$(".videoCategory").removeClass("sort_click");
	$(this).addClass("sort_click");
})

function adjustCSS() {
	var screenWidth = window.innerWidth;
	
	if(screenWidth <= 480){
		
	}else{
		var leftHeight = document.querySelector('.left').offsetHeight;
	
		document.querySelector('.divine-left').style.height = leftHeight + 'px';
		document.querySelector('.divine-right').style.height = leftHeight + 'px';
		
	}

}

adjustCSS();

window.addEventListener('resize', function() {
    adjustCSS();
});



</script>
</body>
</html>